---
apiVersion: v1
kind: Namespace
metadata:
  name: monitoring
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: monitoring
  labels:
    app: influxdb
    app.kubernetes.io/app: influxdb
    app.kubernetes.io/project: isp-checker
  name: influxdb-pvc
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: monitoring
  labels:
    app: grafana
    app.kubernetes.io/app: grafana
    app.kubernetes.io/project: isp-checker
  name: grafana-pvc
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
---
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: monitoring
  name: grafana-dashboard-provisioner
  labels:
    app.kubernetes.io/app: grafana
    app.kubernetes.io/project: isp-checker
data:
  dashboards.yaml: |-
    apiVersion: 1
    providers:
    - name: 'Dashboards'
      orgId: 1
      folder: ''
      type: file
      disableDeletion: true
      editable: false
      options:
        path: /var/lib/grafana/dashboards/
        foldersFromFilesStructure: true

---
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: monitoring
  name: telegraf-config
  labels:
    app.kubernetes.io/app: grafana
    app.kubernetes.io/project: isp-checker
data:
  telegraf.conf: |-
    [global_tags]
    [agent]
    interval = "60s"
    round_interval = true
    metric_batch_size = 1000
    metric_buffer_limit = 10000
    collection_jitter = "0s"
    flush_interval = "10s"
    flush_jitter = "0s"
    precision = ""
    hostname = "$HOSTNAME"
    omit_hostname = false
    debug = false
    quiet = true

    [[outputs.influxdb]]
    urls = ["http://influxdb-svc.monitoring.svc.cluster.local:8086/"]
    database = "$INFLUXDB_DB"
    timeout = "60s"
    username = "$INFLUXDB_ADMIN_USER"
    password = "$INFLUXDB_ADMIN_PASSWORD"
    user_agent = "telegraf"
    skip_database_creation = false

    [[inputs.net]]
    [[inputs.netstat]]
    [[inputs.diskio]]
    [[inputs.kernel]]
    [[inputs.linux_sysctl_fs]]
    [[inputs.mem]]
    [[inputs.processes]]
    [[inputs.swap]]
    [[inputs.system]]

    [[inputs.cpu]]
    percpu = true
    totalcpu = true
    collect_cpu_time = false
    report_active = false

    [[inputs.disk]]
    ignore_fs = ["tmpfs",
    "devtmpfs",
    "devfs",
    "iso9660",
    "overlay",
    "aufs",
    "squashfs"
    ]

    [[inputs.dns_query]]
    servers = ["4.2.2.1", "8.8.8.8"]
    domains = ["www.google.com",
    "www.twitter.com",
    "www.amazon.com",
    "www.wikipedia.org"
    ]
    record_type = "A"
    port = 53
    timeout = 3

    [[inputs.http_response]]
    urls = [
      "http://www.google.com",
      "http://www.twitter.com",
      "http://www.amazon.com",
      "http://www.yahoo.com"
      ]
      response_timeout = "5s"
      method = "GET"
      follow_redirects = true

      [[inputs.internal]]
      collect_memstats = true

      [[inputs.ping]]
      urls = [
        "google.com",
        "twitter.com",
        "amazon.com",
        "yahoo.com"
      ]
      method = "exec"
      count = 1
      ping_interval = 1.0
      timeout = 5.0
      deadline = 10
      binary = "ping"
      ipv6 = false

      [[inputs.docker]]
      endpoint = "unix:///var/run/docker.sock"

      [[inputs.file]]
      files = ["/sys/class/thermal/thermal_zone0/temp"]
      name_override = "cpu_temperature"
      data_format = "value"
      data_type = "integer"

      [[inputs.exec]]
      commands = ["cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq"]
      name_override = "cpu_frequency"
      data_format = "value"
      data_type = "integer"

  telegraf-mtr.conf: |-
    [global_tags]
    [agent]
    interval = "60s"
    round_interval = true
    metric_batch_size = 1000
    metric_buffer_limit = 10000
    collection_jitter = "0s"
    flush_interval = "10s"
    flush_jitter = "0s"
    precision = ""
    hostname = "$HOSTNAME"
    omit_hostname = false
    debug = false
    quiet = true

    [[outputs.influxdb]]
    urls = ["http://influxdb-svc.monitoring.svc.cluster.local:8086/"]
    database = "$INFLUXDB_DB"
    timeout = "60s"
    username = "$INFLUXDB_ADMIN_USER"
    password = "$INFLUXDB_ADMIN_PASSWORD"
    user_agent = "telegraf"
    skip_database_creation = false

    [[inputs.exec]]
    commands=["mtr -C google.com s3-website.ap-northeast-2.amazonaws.com s3-website.eu-central-1.amazonaws.com s3-website.af-south-1.amazonaws.com"]
    timeout = "3m"
    interval = "7m"
    data_format = "csv"
    csv_skip_rows = 1
    csv_column_names=[ "", "", "status","dest","hop","ip","loss","snt","", "","avg","best","worst","stdev"]
    name_override = "mtr"
    csv_tag_columns = ["dest", "hop", "ip"]

  telegraf-speedtest.conf: |-
    [global_tags]
    [agent]
    interval = "60s"
    round_interval = true
    metric_batch_size = 1000
    metric_buffer_limit = 10000
    collection_jitter = "0s"
    flush_interval = "10s"
    flush_jitter = "0s"
    precision = ""
    hostname = "$HOSTNAME"
    omit_hostname = false
    debug = false
    quiet = true

    [[outputs.influxdb]]
    urls = ["http://influxdb-svc.monitoring.svc.cluster.local:8086/"]
    database = "$INFLUXDB_DB"
    timeout = "60s"
    username = "$INFLUXDB_ADMIN_USER"
    password = "$INFLUXDB_ADMIN_PASSWORD"
    user_agent = "telegraf"
    skip_database_creation = false

    [[inputs.exec]]
    commands = ["/usr/bin/speedtest-cli --csv --bytes"]
    name_override = "speedtest"
    timeout = "3m"
    interval = "15m"
    data_format = "csv"
    csv_column_names = ['Server ID', 'Sponsor', 'Server Name', 'Timestamp', 'Distance', 'Ping', 'Download', 'Upload', 'Share', 'IP Address']
    csv_timestamp_column = "Timestamp"
    csv_timestamp_format = "2006-01-02T15:04:05Z07:00"
---
apiVersion: v1
kind: Secret
metadata:
  namespace: monitoring
  name: isp-checker-secrets-rw
type: Opaque
stringData:
  INFLUXDB_DB: telegraf
  INFLUXDB_ADMIN_USER: admin
  INFLUXDB_ADMIN_PASSWORD: VerySecurePassword

---
apiVersion: v1
kind: Secret
metadata:
  namespace: monitoring
  name: isp-checker-secrets-ro
  labels:
    app.kubernetes.io/app: influxdb
    app.kubernetes.io/project: isp-checker
type: Opaque
stringData:
  INFLUXDB_DB: telegraf
  INFLUXDB_READ_USER: grafana
  INFLUXDB_READ_PASSWORD: VerySecurePassword

---
apiVersion: v1
kind: Secret
metadata:
  namespace: monitoring
  name: influxdb-datasource-provisioner
  labels:
    app.kubernetes.io/app: grafana
    app.kubernetes.io/project: isp-checker
stringData:
  datasource.yaml: |-
    datasources:
      - name: InfluxDB
        type: influxdb
        access: proxy
        orgId: 1
        url: http://influxdb-svc.monitoring.svc.cluster.local:8086/
        user: grafana
        database: telegraf
        isDefault: true
        editable: true
---
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: monitoring
  name: network-dashboard
  labels:
    app.kubernetes.io/app: grafana
    app.kubernetes.io/project: isp-checker
data:
  network-dashboard.json: |-
    {
     "annotations": {
       "list": [
        {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
        }
      ]
    },
      "description": "Network latencies and availability",
      "editable": true,
      "gnetId": 13140,
      "graphTooltip": 0,
      "iteration": 1603557787209,
      "links": [],
      "panels": [
        {
          "datasource": null,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
      "overrides": []
      },
          "gridPos": {
            "h": 6,
            "w": 11,
            "x": 0,
            "y": 0
      },
          "id": 95,
          "options": {
            "content": "<img src=\"https://github.com/fmdlc/ISP-Checker/raw/master/img/logo.png\" />         ",
            "mode": "html"
      },
          "pluginVersion": "7.1.0",
          "timeFrom": null,
          "timeShift": null,
          "title": "",
          "transparent": true,
          "type": "text"
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "description": "",
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 2,
          "gridPos": {
            "h": 9,
            "w": 13,
            "x": 11,
            "y": 0
        },
          "hiddenSeries": false,
          "id": 24,
          "legend": {
            "alignAsTable": false,
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": false,
            "total": false,
            "values": false
        },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "Download",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "previous"
                ],
          "type": "fill"
          }
          ],
              "measurement": "speedtest",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Download"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                },
                {
                  "params": [
                    " / 1000000"
                  ],
                    "type": "math"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$NetHost$/"
              }
          ]
          },
          {
            "alias": "Upload",
            "groupBy": [
              {
                "params": [
                  "$__interval"
                ],
            "type": "time"
            },
            {
              "params": [
                "previous"
                ],
              "type": "fill"
              }
            ],
              "measurement": "speedtest",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Upload"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                },
                {
                  "params": [
                    " / 1000000"
                  ],
                    "type": "math"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Speedtest TX/RX",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "$$hashKey": "object:401",
              "format": "Mbits",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "$$hashKey": "object:402",
            "decimals": 2,
            "format": "MBs",
            "label": "Download (MB/s)",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "mappings": [],
            "max": 300,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "dark-red",
                  "value": null
                },
                {
                  "color": "super-light-green",
                  "value": 0
                },
                {
                  "color": "light-green",
                  "value": 50
                },
                {
                  "color": "semi-dark-green",
                  "value": 100
                },
                {
                  "color": "semi-dark-green",
                  "value": 150
                },
                {
                  "color": "light-orange",
                  "value": 150
                },
                {
                  "color": "super-light-orange",
                  "value": 200
                },
                {
                  "color": "semi-dark-orange",
                  "value": 250
                },
                {
                  "color": "dark-red",
                  "value": 300
                }
              ]
            },
          "unit": "ms"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 11,
            "w": 6,
            "x": 0,
            "y": 6
        },
          "id": 26,
          "options": {
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
            ],
          "fields": "",
          "values": false
          },
            "showThresholdLabels": true,
            "showThresholdMarkers": true
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "5m"
                ],
              "type": "time"
              },
              {
                "params": [
                  "previous"
                ],
          "type": "fill"
          }
          ],
              "measurement": "speedtest",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Ping"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Speedtest (Ping)",
          "type": "gauge"
      },
      {
        "datasource": "InfluxDB",
        "description": "Download bandwidth",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 2,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "dark-red",
                  "value": null
                },
                {
                  "color": "light-red",
                  "value": 5
                },
                {
                  "color": "dark-orange",
                  "value": 10
                },
                {
                  "color": "super-light-orange",
                  "value": 20
                },
                {
                  "color": "super-light-green",
                  "value": 30
                },
                {
                  "color": "light-green",
                  "value": 40
                },
                {
                  "color": "semi-dark-green",
                  "value": 50
                }
              ]
            },
          "unit": "Mbits"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 5,
            "x": 6,
            "y": 6
        },
          "id": 20,
          "options": {
            "colorMode": "background",
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
            ],
          "fields": "",
          "values": false
          },
            "textMode": "auto"
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "5m"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "speedtest",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Download"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                },
                {
                  "params": [
                    "/1048576"
                  ],
                    "type": "math"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Bandwidth (Download)",
          "type": "stat"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "description": "Percentage of package lost ",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "unit": "percent"
          },
        "overrides": []
        },
          "fill": 3,
          "fillGradient": 2,
          "gridPos": {
            "h": 8,
            "w": 13,
            "x": 11,
            "y": 9
        },
          "hiddenSeries": false,
          "id": 8,
          "legend": {
            "alignAsTable": false,
            "avg": false,
            "current": false,
            "hideEmpty": false,
            "hideZero": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
        },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:405"
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "5m"
                ],
              "type": "time"
              },
              {
                "params": [
                  "linear"
                ],
          "type": "fill"
          }
          ],
              "measurement": "ping",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "percent_packet_loss"
                  ],
              "type": "field"
              },
              {
                "params": [
                  95
                  ],
                "type": "percentile"
                }
              ]
          ],
              "tags": []
          }
        ],
          "thresholds": [
            {
              "$$hashKey": "object:387",
              "colorMode": "critical",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 25,
              "yaxis": "left"
          },
          {
            "$$hashKey": "object:393",
            "colorMode": "warning",
            "fill": false,
            "line": true,
            "op": "gt",
            "value": 2,
            "yaxis": "left"
          },
          {
            "$$hashKey": "object:399",
            "colorMode": "ok",
            "fill": true,
            "line": false,
            "op": "lt",
            "value": 2,
            "yaxis": "left"
          }
        ],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "ICMP Packet loss (%)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "$$hashKey": "object:416",
              "format": "percent",
              "label": "Packet lost %",
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": true
          },
          {
            "$$hashKey": "object:417",
            "format": "percent",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "datasource": "InfluxDB",
        "description": "Uptime bandwidth",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 2,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "dark-red",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 0.5
                },
                {
                  "color": "dark-orange",
                  "value": 1
                },
                {
                  "color": "light-yellow",
                  "value": 2
                },
                {
                  "color": "super-light-green",
                  "value": 3
                },
                {
                  "color": "light-green",
                  "value": 4
                },
                {
                  "color": "semi-dark-green",
                  "value": 5
                },
                {
                  "color": "dark-green",
                  "value": 6
                }
              ]
            },
          "unit": "Mbits"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 6,
            "y": 12
        },
          "id": 22,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
            ],
          "fields": "",
          "values": false
          },
            "textMode": "auto"
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "5m"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "speedtest",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Upload"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                },
                {
                  "params": [
                    "/1048576"
                  ],
                    "type": "math"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Bandwidth (Upload)",
          "type": "stat"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "description": "ICMP echo requests average latency.",
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 2,
          "gridPos": {
            "h": 10,
            "w": 18,
            "x": 0,
            "y": 17
        },
          "hiddenSeries": false,
          "id": 2,
          "legend": {
            "alignAsTable": false,
            "avg": false,
            "current": false,
            "hideEmpty": true,
            "hideZero": false,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sideWidth": null,
            "total": false,
            "values": false
        },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_url",
              "groupBy": [
                {
                  "params": [
                    "url"
                ],
              "type": "tag"
              }
            ],
          "measurement": "ping",
          "orderByTime": "ASC",
          "policy": "default",
          "refId": "A",
          "resultFormat": "time_series",
          "select": [
            [
              {
                "params": [
                  "average_response_ms"
                  ],
                "type": "field"
                }
              ]
            ],
          "tags": [
            {
              "key": "url",
              "operator": "=~",
              "value": "/^$PingURL$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [
            {
              "$$hashKey": "object:150",
              "colorMode": "background6",
              "fill": true,
              "fillColor": "rgba(234, 112, 112, 0.12)",
              "line": false,
              "lineColor": "rgba(237, 46, 24, 0.60)",
              "op": "time"
          }
        ],
          "timeShift": null,
          "title": "ICMP average response",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "$$hashKey": "object:100",
              "format": "short",
              "label": "average (ms)",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "$$hashKey": "object:101",
            "format": "short",
            "label": "",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "datasource": "InfluxDB",
        "description": "Average response time for External Ping in ms.",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "mappings": [],
            "max": 1000,
            "min": 0,
            "thresholds": {
              "mode": "percentage",
              "steps": [
                {
                  "color": "super-light-green",
                  "value": null
                },
                {
                  "color": "light-green",
                  "value": 10
                },
                {
                  "color": "semi-dark-green",
                  "value": 20
                },
                {
                  "color": "dark-green",
                  "value": 30
                },
                {
                  "color": "super-light-orange",
                  "value": 40
                },
                {
                  "color": "light-orange",
                  "value": 50
                },
                {
                  "color": "semi-dark-orange",
                  "value": 70
                },
                {
                  "color": "dark-orange",
                  "value": 80
                },
                {
                  "color": "light-red",
                  "value": 90
                },
                {
                  "color": "dark-red",
                  "value": 100
                }
              ]
            },
          "unit": "ms"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 10,
            "w": 6,
            "x": 18,
            "y": 17
        },
          "id": 4,
          "options": {
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "/^ping\\.average_response_ms$/",
          "values": false
          },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "groupBy": [],
              "hide": false,
              "limit": "",
              "measurement": "ping",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT \"average_response_ms\" FROM \"ping\" ",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "average_response_ms"
                  ],
              "type": "field"
              }
              ]
            ],
          "tags": [
            {
              "key": "url",
              "operator": "=~",
              "value": "/^$PingURL$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Ping AVG response time",
          "type": "gauge"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 11,
            "x": 0,
            "y": 27
        },
          "hiddenSeries": false,
          "id": 87,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
        },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "HTTP",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "linear"
                ],
          "type": "fill"
          }
          ],
              "measurement": "http_response",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "response_time"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "stddev"
                }
              ]
          ],
              "tags": []
          },
          {
            "alias": "ICMP",
            "groupBy": [
              {
                "params": [
                  "$__interval"
                ],
            "type": "time"
            },
            {
              "params": [
                "null"
                ],
              "type": "fill"
              }
            ],
              "measurement": "ping",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "standard_deviation_ms"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Jitter (ICMP/HTTP)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "$$hashKey": "object:2579",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "$$hashKey": "object:2580",
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {
              "align": "left",
              "displayMode": "color-background",
              "filterable": true
            },
          "displayName": "Execution",
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgb(96, 96, 96)",
                "value": null
                },
                {
                  "color": "rgb(22, 51, 116)",
                  "value": 80
                }
              ]
            },
          "unit": "dateTimeAsUS"
          },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Time"
              },
            "properties": [
              {
                "id": "custom.width",
                "value": 176
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Time"
              },
        "properties": [
          {
            "id": "displayName",
            "value": "Execution"
            }
            ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "last"
              },
        "properties": [
          {
            "id": "displayName",
            "value": "Speedtest Server"
            }
            ]
            }
          ]
        },
          "gridPos": {
            "h": 9,
            "w": 13,
            "x": 11,
            "y": 27
        },
          "id": 97,
          "options": {
            "showHeader": true,
            "sortBy": []
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "none"
                ],
          "type": "fill"
          }
          ],
              "measurement": "speedtest",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "Sponsor"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "",
          "type": "table"
      },
      {
        "datasource": "InfluxDB",
        "description": "DNS resolution average query time",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "mappings": [],
            "max": 500,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "super-light-yellow",
                  "value": 200
                },
                {
                  "color": "semi-dark-orange",
                  "value": 300
                },
                {
                  "color": "dark-red",
                  "value": 400
                }
              ]
            },
          "unit": "ms"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 9,
            "w": 11,
            "x": 0,
            "y": 36
        },
          "id": 6,
          "options": {
            "displayMode": "gradient",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "last"
            ],
          "fields": "",
          "values": false
          },
            "showUnfilled": true
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "alias": "$tag_domain",
              "groupBy": [
                {
                  "params": [
                    "domain"
                ],
              "type": "tag"
              }
            ],
          "measurement": "dns_query",
          "orderByTime": "ASC",
          "policy": "default",
          "refId": "A",
          "resultFormat": "time_series",
          "select": [
            [
              {
                "params": [
                  "query_time_ms"
                  ],
                "type": "field"
                }
              ]
            ],
          "tags": [
            {
              "key": "host",
              "operator": "=~",
              "value": "/^$NetHost$/"
              }
            ]
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "DNS AVG Query time",
          "type": "bargauge"
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 13,
            "x": 11,
            "y": 36
        },
          "hiddenSeries": false,
          "id": 99,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": false
        },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "ICMP Out redirects",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "none"
                ],
          "type": "fill"
          }
          ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "icmp_outredirects"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$NetHost$/"
              }
          ]
          },
          {
            "alias": "ICMP In Redirects",
            "groupBy": [
              {
                "params": [
                  "$__interval"
                ],
            "type": "time"
            },
            {
              "params": [
                "none"
                ],
              "type": "fill"
              }
            ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "icmp_inredirects"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$NetHost$/"
              }
            ]
          },
          {
            "alias": "ICMP Out Time exceeded",
            "groupBy": [
              {
                "params": [
                  "$__interval"
                ],
            "type": "time"
            },
            {
              "params": [
                "null"
                ],
              "type": "fill"
              }
            ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "C",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "icmp_outtimeexcds"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$NetHost$/"
              }
            ]
          },
          {
            "alias": "ICMP In Time exceeded",
            "groupBy": [
              {
                "params": [
                  "$__interval"
                ],
            "type": "time"
            },
            {
              "params": [
                "null"
                ],
              "type": "fill"
              }
            ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "D",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "icmp_intimeexcds"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$NetHost$/"
              }
            ]
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "ICMP Analysis",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "$$hashKey": "object:765",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
          },
          {
            "$$hashKey": "object:766",
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": "InfluxDB",
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 45
        },
          "id": 34,
          "panels": [],
          "title": "Connectivity metrics",
          "type": "row"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 2,
            "mappings": [],
            "min": 0,
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "super-light-green",
                  "value": null
                },
                {
                  "color": "semi-dark-green",
                  "value": 150
                },
                {
                  "color": "dark-green",
                  "value": 200
                },
                {
                  "color": "#EAB839",
                  "value": 250
                },
                {
                  "color": "semi-dark-orange",
                  "value": 300
                },
                {
                  "color": "dark-red",
                  "value": 350
                }
              ]
            },
          "unit": "ms"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 0,
            "y": 46
        },
          "id": 42,
          "options": {
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "",
          "values": false
          },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
        },
          "pluginVersion": "7.2.1",
          "repeat": "PingURL",
          "scopedVars": {
            "PingURL": {
              "selected": false,
              "text": "amazon.com",
              "value": "amazon.com"
          }
        },
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "hide": false,
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT mean(\"average_response_ms\") FROM \"ping\" WHERE (\"url\" =~ /^$PingURL$/) AND $timeFilter GROUP BY time($__interval) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "$PingURL Ping",
          "type": "gauge"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 2,
            "mappings": [],
            "min": 0,
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "super-light-green",
                  "value": null
                },
                {
                  "color": "semi-dark-green",
                  "value": 150
                },
                {
                  "color": "dark-green",
                  "value": 200
                },
                {
                  "color": "#EAB839",
                  "value": 250
                },
                {
                  "color": "semi-dark-orange",
                  "value": 300
                },
                {
                  "color": "dark-red",
                  "value": 350
                }
              ]
            },
          "unit": "ms"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 6,
            "y": 46
        },
          "id": 88,
          "options": {
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "",
          "values": false
          },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
        },
          "pluginVersion": "7.2.1",
          "repeatIteration": 1603557787209,
          "repeatPanelId": 42,
          "scopedVars": {
            "PingURL": {
              "selected": false,
              "text": "google.com",
              "value": "google.com"
          }
        },
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "hide": false,
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT mean(\"average_response_ms\") FROM \"ping\" WHERE (\"url\" =~ /^$PingURL$/) AND $timeFilter GROUP BY time($__interval) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "$PingURL Ping",
          "type": "gauge"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 2,
            "mappings": [],
            "min": 0,
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "super-light-green",
                  "value": null
                },
                {
                  "color": "semi-dark-green",
                  "value": 150
                },
                {
                  "color": "dark-green",
                  "value": 200
                },
                {
                  "color": "#EAB839",
                  "value": 250
                },
                {
                  "color": "semi-dark-orange",
                  "value": 300
                },
                {
                  "color": "dark-red",
                  "value": 350
                }
              ]
            },
          "unit": "ms"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 12,
            "y": 46
        },
          "id": 89,
          "options": {
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "",
          "values": false
          },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
        },
          "pluginVersion": "7.2.1",
          "repeatIteration": 1603557787209,
          "repeatPanelId": 42,
          "scopedVars": {
            "PingURL": {
              "selected": false,
              "text": "twitter.com",
              "value": "twitter.com"
          }
        },
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "hide": false,
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT mean(\"average_response_ms\") FROM \"ping\" WHERE (\"url\" =~ /^$PingURL$/) AND $timeFilter GROUP BY time($__interval) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "$PingURL Ping",
          "type": "gauge"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 2,
            "mappings": [],
            "min": 0,
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "super-light-green",
                  "value": null
                },
                {
                  "color": "semi-dark-green",
                  "value": 150
                },
                {
                  "color": "dark-green",
                  "value": 200
                },
                {
                  "color": "#EAB839",
                  "value": 250
                },
                {
                  "color": "semi-dark-orange",
                  "value": 300
                },
                {
                  "color": "dark-red",
                  "value": 350
                }
              ]
            },
          "unit": "ms"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 18,
            "y": 46
        },
          "id": 90,
          "options": {
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "",
          "values": false
          },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
        },
          "pluginVersion": "7.2.1",
          "repeatIteration": 1603557787209,
          "repeatPanelId": 42,
          "scopedVars": {
            "PingURL": {
              "selected": false,
              "text": "yahoo.com",
              "value": "yahoo.com"
          }
        },
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "hide": false,
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT mean(\"average_response_ms\") FROM \"ping\" WHERE (\"url\" =~ /^$PingURL$/) AND $timeFilter GROUP BY time($__interval) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "$PingURL Ping",
          "type": "gauge"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "description": "HTTP GET request response time (ms)",
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 10,
            "w": 24,
            "x": 0,
            "y": 52
        },
          "hiddenSeries": false,
          "id": 12,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_server",
              "groupBy": [
                {
                  "params": [
                    "server"
                ],
              "type": "tag"
              }
            ],
          "measurement": "http_response",
          "orderByTime": "ASC",
          "policy": "default",
          "refId": "A",
          "resultFormat": "time_series",
          "select": [
            [
              {
                "params": [
                  "response_time"
                  ],
                "type": "field"
                }
              ]
            ],
          "tags": [
            {
              "key": "method",
              "operator": "=",
              "value": "GET"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          }
        ],
          "thresholds": [
            {
              "$$hashKey": "object:1216",
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 10,
              "yaxis": "left"
          },
          {
            "$$hashKey": "object:1222",
            "colorMode": "warning",
            "fill": false,
            "line": false,
            "op": "gt",
            "value": 5,
            "yaxis": "left"
          },
          {
            "$$hashKey": "object:1228",
            "colorMode": "ok",
            "fill": true,
            "line": true,
            "op": "lt",
            "value": 2,
            "yaxis": "left"
          }
        ],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "HTTP GET response time (ms)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "$$hashKey": "object:1019",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "$$hashKey": "object:1020",
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 18,
            "w": 12,
            "x": 0,
            "y": 62
        },
          "hiddenSeries": false,
          "id": 85,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "rightSide": false,
            "show": true,
            "total": true,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$col",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "netstat",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT mean(\"tcp_close\") AS \"tcp_close\", mean(\"tcp_close_wait\") AS \"tcp_close_wait\", mean(\"tcp_closing\") AS \"tcp_colsing\", mean(\"tcp_fin_wait1\") AS \"tcp_fin_wait1\", mean(\"tcp_fin_wait2\") AS \"tcp_fin_wait2\", mean(\"tcp_last_ack\") AS \"tcp_last_ack\", mean(\"tcp_syn_recv\") AS \"tcp_syn_recv\", mean(\"tcp_syn_sent\") AS \"tcp_syn_sent\", mean(\"tcp_listen\") AS \"tcp_listen\", mean(\"tcp_time_wait\") AS \"tcp_time_wait\", mean(\"udp_socket\") AS \"udp_socket\", mean(\"tcp_established\") AS \"tcp_established\" FROM \"netstat\" WHERE (\"host\" =~ /^$NetHost$/) AND $timeFilter GROUP BY time($interval) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "tcp_close"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                },
                {
                  "params": [
                    "tcp_close"
                  ],
                    "type": "alias"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$NetHost$/"
              }
          ]
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Netstat",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "$$hashKey": "object:2208",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "$$hashKey": "object:2209",
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": false
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
        "overrides": []
        },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 18,
            "w": 12,
            "x": 12,
            "y": 62
        },
          "hiddenSeries": false,
          "id": 16,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": true,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 1,
          "nullPointMode": "null as zero",
          "options": {
            "alertThreshold": false
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "Tx (Bytes)",
              "groupBy": [
                {
                  "params": [
                    "1m"
                ],
              "type": "time"
              }
            ],
          "measurement": "net",
          "orderByTime": "ASC",
          "policy": "default",
          "refId": "A",
          "resultFormat": "time_series",
          "select": [
            [
              {
                "params": [
                  "bytes_sent"
                  ],
                "type": "field"
                },
                {
                  "params": [],
                  "type": "sum"
                }
              ]
            ],
          "tags": [
            {
              "key": "interface",
              "operator": "=~",
              "value": "/^$NetInterface$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          },
          {
            "alias": "Rx (Bytes)",
            "groupBy": [
              {
                "params": [
                  "1m"
                ],
            "type": "time"
            }
            ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "bytes_recv"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                }
              ]
            ],
              "tags": [
                {
                  "key": "interface",
                  "operator": "=~",
                  "value": "/^$NetInterface$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          },
          {
            "alias": "Drop In",
            "groupBy": [
              {
                "params": [
                  "1m"
                ],
            "type": "time"
            }
            ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "C",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "drop_in"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                }
              ]
            ],
              "tags": [
                {
                  "key": "interface",
                  "operator": "=~",
                  "value": "/^$NetInterface$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          },
          {
            "alias": "Drop Out",
            "groupBy": [
              {
                "params": [
                  "1m"
                ],
            "type": "time"
            }
            ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "D",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "drop_out"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                }
              ]
            ],
              "tags": [
                {
                  "key": "interface",
                  "operator": "=~",
                  "value": "/^$NetInterface$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          },
          {
            "alias": "Error In",
            "groupBy": [
              {
                "params": [
                  "1m"
                ],
            "type": "time"
            }
            ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "E",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "err_in"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                }
              ]
            ],
              "tags": [
                {
                  "key": "interface",
                  "operator": "=~",
                  "value": "/^$NetInterface$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          },
          {
            "alias": "Error Out",
            "groupBy": [
              {
                "params": [
                  "1m"
                ],
            "type": "time"
            }
            ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "F",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "err_out"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                }
              ]
            ],
              "tags": [
                {
                  "key": "interface",
                  "operator": "=~",
                  "value": "/^$NetInterface$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          }
        ],
          "thresholds": [
            {
              "$$hashKey": "object:1747",
              "colorMode": "warning",
              "fill": true,
              "line": true,
              "op": "lt",
              "value": 0,
              "yaxis": "left"
          }
        ],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Interface: $NetInterface (Tx/Rx)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "series",
            "name": null,
            "show": true,
            "values": [
              "total"
          ]
        },
          "yaxes": [
            {
              "$$hashKey": "object:1468",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "$$hashKey": "object:1469",
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": true,
            "alignLevel": null
        }
      },
      {
        "cards": {
          "cardPadding": 1,
          "cardRound": null
        },
          "color": {
            "cardColor": "#b4ff00",
            "colorScale": "sqrt",
            "colorScheme": "interpolateInferno",
            "exponent": 0.5,
            "max": null,
            "min": null,
            "mode": "spectrum"
        },
          "dataFormat": "timeseries",
          "datasource": "InfluxDB",
          "description": "Standard Deviation (ms) heatmap",
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "gridPos": {
            "h": 12,
            "w": 12,
            "x": 0,
            "y": 80
        },
          "heatmap": {},
          "hideZeroBuckets": false,
          "highlightCards": true,
          "id": 10,
          "legend": {
            "show": true
        },
          "pluginVersion": "7.2.0",
          "reverseYBuckets": false,
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              }
            ],
          "measurement": "ping",
          "orderByTime": "ASC",
          "policy": "default",
          "refId": "A",
          "resultFormat": "table",
          "select": [
            [
              {
                "params": [
                  "standard_deviation_ms"
                  ],
                "type": "field"
                },
                {
                  "params": [],
                  "type": "stddev"
                }
              ]
            ],
          "tags": [
            {
              "key": "url",
              "operator": "=~",
              "value": "/^$PingURL$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
            ]
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Ping Standard Deviation (ms)",
          "tooltip": {
            "show": true,
            "showHistogram": true
        },
          "tooltipDecimals": 3,
          "transparent": true,
          "type": "heatmap",
          "xAxis": {
            "show": true
        },
          "xBucketNumber": null,
          "xBucketSize": "10s",
          "yAxis": {
            "decimals": null,
            "format": "ms",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true,
            "splitFactor": null
        },
          "yBucketBound": "auto",
          "yBucketNumber": null,
          "yBucketSize": null
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {
              "align": "center",
              "displayMode": "color-text",
              "filterable": true
            },
          "mappings": [],
          "max": 500,
          "min": 100,
          "noValue": "N/A",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "super-light-blue",
                "value": null
                }
              ]
            },
          "unit": "none"
          },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Time"
              },
            "properties": [
              {
                "id": "custom.width",
                "value": 100
                },
                {
                  "id": "custom.displayMode",
                  "value": "color-text"
                },
                {
                  "id": "unit",
                  "value": "dateTimeAsLocal"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "server"
              },
        "properties": [
          {
            "id": "custom.width",
            "value": 300
            },
            {
              "id": "mappings",
              "value": []
              }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "last"
              },
        "properties": [
          {
            "id": "custom.width",
            "value": 145
            },
            {
              "id": "displayName",
              "value": "Response code"
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "light-red",
                      "value": null
                      },
                      {
                        "color": "light-green",
                        "value": 100
                      },
                      {
                        "color": "light-green",
                        "value": 200
                      },
                      {
                        "color": "semi-dark-green",
                        "value": 300
                      },
                      {
                        "color": "super-light-yellow",
                        "value": 400
                      },
                      {
                        "color": "super-light-red",
                        "value": 500
                      }
                    ]
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Response code"
              },
        "properties": [
          {
            "id": "custom.width",
            "value": 145
            }
            ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "method"
              },
        "properties": [
          {
            "id": "custom.width",
            "value": 100
            }
            ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Endpoint"
              },
        "properties": [
          {
            "id": "custom.width",
            "value": 514
            }
            ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "HTTP Method"
              },
        "properties": [
          {
            "id": "custom.width",
            "value": 333
            }
            ]
            }
          ]
        },
          "gridPos": {
            "h": 6,
            "w": 12,
            "x": 12,
            "y": 80
        },
          "id": 14,
          "options": {
            "showHeader": true,
            "sortBy": []
        },
          "pluginVersion": "7.2.1",
          "repeat": null,
          "repeatDirection": "h",
          "targets": [
            {
              "alias": "$tag_server",
              "groupBy": [
                {
                  "params": [
                    "server"
                ],
              "type": "tag"
              },
              {
                "params": [
                  "method"
                ],
          "type": "tag"
          }
          ],
              "measurement": "http_response",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "http_response_code"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "HTTP response codes",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true
              },
          "indexByName": {
            "Time": 0,
            "last": 3,
            "method": 2,
            "server": 1
            },
          "renameByName": {
            "last": "Response code",
            "method": "HTTP Method",
            "server": "Endpoint"
            }
            }
          }
        ],
          "transparent": true,
          "type": "table"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
        "overrides": []
        },
          "gridPos": {
            "h": 12,
            "w": 12,
            "x": 12,
            "y": 86
        },
          "id": 18,
          "options": {
            "geoIPProviders": {
              "active": "ipsb",
              "custom-api": {
                "kind": "custom-api"
            },
          "custom-function": {
            "kind": "custom-function"
            },
          "ipinfo": {
            "kind": "ipinfo"
            },
          "ipsb": {
            "kind": "ipsb"
            }
          },
            "hostnameLabelWidth": 8,
            "longitude360": false,
            "mapClusterRadius": 15,
            "simplifyHostname": false
        },
          "pluginVersion": "7.2.0",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "orderByTime": "ASC",
              "policy": "default",
              "query": "select mean(avg) as rtt, mean(loss) as loss from mtr WHERE now() - 5m < time group by hop, ip, host, dest\n",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "TraceRoute",
          "type": "gowee-traceroutemap-panel"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 3,
            "mappings": [],
            "min": 0,
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "rgb(238, 238, 238)",
                  "value": null
                }
              ]
            },
          "unit": "decmbytes"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 0,
            "y": 92
        },
          "id": 65,
          "maxDataPoints": 100,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "last"
            ],
          "fields": "",
          "values": false
          },
            "textMode": "value"
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "5m"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "bytes_recv"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                },
                {
                  "params": [
                    "/1048576"
                  ],
                    "type": "math"
                },
                {
                  "params": [
                    "MiB Sent"
                  ],
                    "type": "alias"
                }
              ]
          ],
              "tags": [
                {
                  "key": "interface",
                  "operator": "=~",
                  "value": "/^$NetInterface$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
          ]
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "MiB Received ($NetInterface)",
          "type": "stat"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 3,
            "mappings": [],
            "min": 0,
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "light-blue",
                  "value": null
                }
              ]
            },
          "unit": "decmbytes"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 6,
            "y": 92
        },
          "id": 56,
          "maxDataPoints": 100,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "last"
            ],
          "fields": "",
          "values": false
          },
            "textMode": "value"
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "5m"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "net",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "bytes_sent"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "sum"
                },
                {
                  "params": [
                    "/1048576"
                  ],
                    "type": "math"
                },
                {
                  "params": [
                    "MiB Sent"
                  ],
                    "type": "alias"
                }
              ]
          ],
              "tags": [
                {
                  "key": "interface",
                  "operator": "=~",
                  "value": "/^$NetInterface$/"
              },
              {
                "condition": "AND",
                "key": "host",
                "operator": "=~",
                "value": "/^$NetHost$/"
              }
          ]
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "MiB Sent ($NetInterface)",
          "type": "stat"
      },
      {
        "collapsed": false,
        "datasource": "InfluxDB",
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 98
        },
          "id": 32,
          "panels": [],
          "title": "Availability metrics",
          "type": "row"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 4,
            "mappings": [
              {
                "from": "",
                "id": 0,
                "text": "N/A",
                "to": "",
                "type": 1,
                "value": "null"
              }
            ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-red",
                "value": null
                },
                {
                  "color": "semi-dark-orange",
                  "value": 95
                },
                {
                  "color": "semi-dark-green",
                  "value": 100
                }
              ]
            },
          "unit": "percent"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 0,
            "y": 99
        },
          "id": 36,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "",
          "values": false
          },
            "textMode": "auto"
        },
          "pluginVersion": "7.2.1",
          "repeat": "PingURL",
          "scopedVars": {
            "PingURL": {
              "selected": false,
              "text": "amazon.com",
              "value": "amazon.com"
          }
        },
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT 100 - mean(\"percent_packet_loss\") FROM \"ping\" WHERE \"url\" =~ /^$PingURL$/ AND $timeFilter GROUP BY time(1m) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "$PingURL Ping",
          "type": "stat"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 4,
            "mappings": [
              {
                "from": "",
                "id": 0,
                "text": "N/A",
                "to": "",
                "type": 1,
                "value": "null"
              }
            ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-red",
                "value": null
                },
                {
                  "color": "semi-dark-orange",
                  "value": 95
                },
                {
                  "color": "semi-dark-green",
                  "value": 100
                }
              ]
            },
          "unit": "percent"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 6,
            "y": 99
        },
          "id": 91,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "",
          "values": false
          },
            "textMode": "auto"
        },
          "pluginVersion": "7.2.1",
          "repeatIteration": 1603557787209,
          "repeatPanelId": 36,
          "scopedVars": {
            "PingURL": {
              "selected": false,
              "text": "google.com",
              "value": "google.com"
          }
        },
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT 100 - mean(\"percent_packet_loss\") FROM \"ping\" WHERE \"url\" =~ /^$PingURL$/ AND $timeFilter GROUP BY time(1m) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "$PingURL Ping",
          "type": "stat"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 4,
            "mappings": [
              {
                "from": "",
                "id": 0,
                "text": "N/A",
                "to": "",
                "type": 1,
                "value": "null"
              }
            ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-red",
                "value": null
                },
                {
                  "color": "semi-dark-orange",
                  "value": 95
                },
                {
                  "color": "semi-dark-green",
                  "value": 100
                }
              ]
            },
          "unit": "percent"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 12,
            "y": 99
        },
          "id": 92,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "",
          "values": false
          },
            "textMode": "auto"
        },
          "pluginVersion": "7.2.1",
          "repeatIteration": 1603557787209,
          "repeatPanelId": 36,
          "scopedVars": {
            "PingURL": {
              "selected": false,
              "text": "twitter.com",
              "value": "twitter.com"
          }
        },
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT 100 - mean(\"percent_packet_loss\") FROM \"ping\" WHERE \"url\" =~ /^$PingURL$/ AND $timeFilter GROUP BY time(1m) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "$PingURL Ping",
          "type": "stat"
      },
      {
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "decimals": 4,
            "mappings": [
              {
                "from": "",
                "id": 0,
                "text": "N/A",
                "to": "",
                "type": 1,
                "value": "null"
              }
            ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-red",
                "value": null
                },
                {
                  "color": "semi-dark-orange",
                  "value": 95
                },
                {
                  "color": "semi-dark-green",
                  "value": 100
                }
              ]
            },
          "unit": "percent"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 18,
            "y": 99
        },
          "id": 93,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
            ],
          "fields": "",
          "values": false
          },
            "textMode": "auto"
        },
          "pluginVersion": "7.2.1",
          "repeatIteration": 1603557787209,
          "repeatPanelId": 36,
          "scopedVars": {
            "PingURL": {
              "selected": false,
              "text": "yahoo.com",
              "value": "yahoo.com"
          }
        },
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT 100 - mean(\"percent_packet_loss\") FROM \"ping\" WHERE \"url\" =~ /^$PingURL$/ AND $timeFilter GROUP BY time(1m) fill(null)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "timeFrom": null,
          "timeShift": null,
          "title": "$PingURL Ping",
          "type": "stat"
      }
    ],
      "refresh": "5s",
      "schemaVersion": 26,
      "style": "dark",
      "tags": [
        "networking",
        "monitoring",
        "telegraf",
        "influxdb",
        "isp",
        "raspberry"
    ],
      "templating": {
        "list": [
          {
            "allValue": null,
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
          },
        "datasource": "InfluxDB",
        "definition": "",
        "hide": 0,
        "includeAll": true,
        "label": null,
        "multi": true,
        "name": "PingURL",
        "options": [],
        "query": "SHOW TAG VALUES FROM \"ping\" WITH KEY = \"url\"",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
        },
        {
          "allValue": null,
          "current": {
            "selected": false,
            "text": "All",
            "value": "$__all"
          },
      "datasource": "InfluxDB",
      "definition": "",
      "hide": 0,
      "includeAll": true,
      "label": null,
      "multi": true,
      "name": "NetInterface",
      "options": [],
      "query": "SHOW TAG VALUES FROM \"net\" WITH KEY = \"interface\" WHERE \"host\" =~ /$NetHost/",
      "refresh": 1,
      "regex": "",
      "skipUrlSync": false,
      "sort": 0,
      "tagValuesQuery": "",
      "tags": [],
      "tagsQuery": "",
      "type": "query",
      "useTags": false
      },
      {
        "allValue": null,
        "current": {
          "selected": false,
          "text": "node1",
          "value": "node1"
          },
        "datasource": "InfluxDB",
        "definition": "",
        "hide": 0,
        "includeAll": false,
        "label": null,
        "multi": false,
        "name": "NetHost",
        "options": [],
        "query": "SHOW TAG VALUES FROM \"net\" WITH KEY = \"host\"",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
        }
      ]
    },
      "time": {
        "from": "now-1h",
        "to": "now"
    },
      "timepicker": {},
      "timezone": "browser",
      "title": "Network",
      "uid": "Is1f1nRgz",
      "version": 1
    }
---
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: monitoring
  name: raspberry-dashboard
  labels:
    app.kubernetes.io/app: grafana
    app.kubernetes.io/project: isp-checker
data:
  raspberry-dashboard.json: |+
    {
      "annotations": {
        "list": [
          {
           "builtIn": 1,
           "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }]
    },
      "description": "Raspberry Pi Monitoring",
      "editable": true,
      "gnetId": 10578,
      "graphTooltip": 1,
      "iteration": 1603435375490,
      "links": [],
      "panels": [
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
        },
      "id": 61987,
      "panels": [],
      "repeat": null,
      "title": "Quick overview",
      "type": "row"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": false,
        "colors": [
          "rgba(245, 54, 54, 0.9)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(50, 172, 45, 0.97)"
        ],
          "datasource": "InfluxDB",
          "decimals": 1,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "s",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 0,
            "y": 1
        },
          "height": "150",
          "id": 61858,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "system",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "uptime"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": "",
          "title": "Uptime",
          "type": "singlestat",
          "valueFontSize": "100%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "datasource": "InfluxDB",
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "mappings": [
              {
                "id": 0,
                "op": "=",
                "text": "N/A",
                "type": 1,
                "value": "null"
              }
            ],
          "noValue": "N/A",
          "nullValueMode": "connected",
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "super-light-green",
                "value": null
                },
                {
                  "color": "light-green",
                  "value": 20
                },
                {
                  "color": "semi-dark-green",
                  "value": 40
                },
                {
                  "color": "#EAB839",
                  "value": 60
                },
                {
                  "color": "light-orange",
                  "value": 80
                },
                {
                  "color": "dark-red",
                  "value": 90
                }
              ]
            },
          "unit": "rothz"
          },
        "overrides": []
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 2,
            "y": 1
        },
          "id": 61998,
          "interval": null,
          "links": [],
          "maxDataPoints": 100,
          "options": {
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "last"
            ],
          "fields": "/^last$/",
          "values": false
          },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
        },
          "pluginVersion": "7.2.1",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "1m"
                ],
              "type": "time"
              },
              {
                "params": [
                  "previous"
                ],
          "type": "fill"
          }
          ],
              "measurement": "cpu_frequency",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT last(value)*1000 as \"cpu frequency\" FROM \"cpu_frequency\" WHERE \"host\" =~ /$server$/ and $timeFilter GROUP BY time($interval), *",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                },
                {
                  "params": [
                    " /1000"
                  ],
                    "type": "math"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "title": "CPU Frequency",
          "type": "gauge"
      },
      {
        "cacheTimeout": null,
        "colorBackground": true,
        "colorPostfix": false,
        "colorPrefix": false,
        "colorValue": false,
        "colors": [
          "#37872D",
          "#FA6400",
          "#C4162A"
        ],
          "datasource": "InfluxDB",
          "decimals": 1,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "celsius",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 4,
            "y": 1
        },
          "height": "150",
          "id": 61997,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "cpu_temperature",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                },
                {
                  "params": [
                    " / 1000"
                  ],
                    "type": "math"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": "75,85",
          "title": "CPU Temperature",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": true,
        "colors": [
          "rgba(50, 172, 45, 0.97)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(245, 54, 54, 0.9)"
        ],
          "datasource": "InfluxDB",
          "decimals": 1,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "none",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 6,
            "y": 1
        },
          "height": "150",
          "id": 61859,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": true
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "system",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "load5"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": "4,8,12",
          "title": "LA medium",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": true,
        "colors": [
          "rgba(50, 172, 45, 0.97)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(245, 54, 54, 0.9)"
        ],
          "datasource": "InfluxDB",
          "decimals": 0,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "none",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 8,
            "y": 1
        },
          "height": "150",
          "id": 61862,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "processes",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "zombies"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": "1,5,10",
          "title": "Zombies",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": true,
        "colors": [
          "rgba(50, 172, 45, 0.97)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(245, 54, 54, 0.9)"
        ],
          "datasource": "InfluxDB",
          "decimals": 0,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "none",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 10,
            "y": 1
        },
          "height": "150",
          "id": 61864,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": true
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "processes",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "total"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": "1,5,10",
          "title": "Processes",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": true,
        "colors": [
          "rgba(50, 172, 45, 0.97)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(245, 54, 54, 0.9)"
        ],
          "datasource": "InfluxDB",
          "decimals": 0,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "none",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 12,
            "y": 1
        },
          "height": "150",
          "id": 61865,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": true
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "processes",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "total_threads"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": "1,5,10",
          "title": "Threads",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": true,
        "colors": [
          "rgba(50, 172, 45, 0.97)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(245, 54, 54, 0.9)"
        ],
          "datasource": "InfluxDB",
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "percent",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": true,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 14,
            "y": 1
        },
          "height": "150",
          "id": 61861,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "pluginVersion": "6.2.1",
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "cpu",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "usage_idle"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                },
                {
                  "params": [
                    "* -1 + 100"
                  ],
                    "type": "math"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              },
              {
                "condition": "AND",
                "key": "cpu",
                "operator": "=",
                "value": "cpu-total"
              }
          ]
          }
        ],
          "thresholds": "70,80,90",
          "title": "CPU usage",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": true,
        "colors": [
          "rgba(50, 172, 45, 0.97)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(245, 54, 54, 0.9)"
        ],
          "datasource": "InfluxDB",
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "percent",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": true,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 16,
            "y": 1
        },
          "height": "150",
          "id": 61860,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "mem",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "used_percent"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": "70,80,90",
          "title": "RAM usage",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": true,
        "colors": [
          "rgba(50, 172, 45, 0.97)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(245, 54, 54, 0.9)"
        ],
          "datasource": "InfluxDB",
          "decimals": 0,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "percent",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": true,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 18,
            "y": 1
        },
          "height": "150",
          "id": 61863,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "swap",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "used_percent"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": "50,70,90",
          "title": "Swap usage",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": true,
        "colors": [
          "rgba(50, 172, 45, 0.97)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(245, 54, 54, 0.9)"
        ],
          "datasource": "InfluxDB",
          "decimals": 0,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "percent",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": true,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 20,
            "y": 1
        },
          "height": "150",
          "id": 61866,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "disk",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "used_percent"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              },
              {
                "condition": "AND",
                "key": "path",
                "operator": "=",
                "value": "/"
              }
          ]
          }
        ],
          "thresholds": "70,80,90",
          "title": "RootFS used",
          "type": "singlestat",
          "valueFontSize": "80%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "cacheTimeout": null,
        "colorBackground": false,
        "colorValue": false,
        "colors": [
          "rgba(245, 54, 54, 0.9)",
          "rgba(237, 129, 40, 0.89)",
          "rgba(50, 172, 45, 0.97)"
        ],
          "datasource": "InfluxDB",
          "decimals": 2,
          "editable": true,
          "error": false,
          "fieldConfig": {
            "defaults": {
              "custom": {}
          },
            "overrides": []
        },
          "format": "percent",
          "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
        },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 22,
            "y": 1
        },
          "height": "150",
          "id": 61867,
          "interval": null,
          "links": [],
          "mappingType": 1,
          "mappingTypes": [
            {
              "name": "value to text",
              "value": 1
          },
          {
            "name": "range to text",
            "value": 2
          }
        ],
          "maxDataPoints": 100,
          "nullPointMode": "connected",
          "nullText": null,
          "postfix": "",
          "postfixFontSize": "50%",
          "prefix": "",
          "prefixFontSize": "50%",
          "rangeMaps": [
            {
              "from": "null",
              "text": "N/A",
              "to": "null"
          }
        ],
          "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": true
        },
          "tableColumn": "",
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "cpu",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(\"usage_iowait\"), 1s) FROM \"cpu\" WHERE \"host\" =~ /^$server$/ AND \"cpu\" = 'cpu-total' AND $timeFilter GROUP BY time($interval) fill(null)",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "usage_iowait"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "last"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              },
              {
                "condition": "AND",
                "key": "cpu",
                "operator": "=",
                "value": "cpu-total"
              }
          ]
          }
        ],
          "thresholds": "30,40,50",
          "title": "IOWait",
          "type": "singlestat",
          "valueFontSize": "100%",
          "valueMaps": [
            {
              "op": "=",
              "text": "N/A",
              "value": "null"
          }
        ],
          "valueName": "current"
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 5
        },
          "id": 61989,
          "panels": [],
          "repeat": null,
          "title": "CPU",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 6
        },
          "height": "300",
          "hiddenSeries": false,
          "id": 28239,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "hideEmpty": true,
            "hideZero": true,
            "max": true,
            "min": true,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 2,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          }
          ],
              "hide": false,
              "measurement": "cpu_percentageBusy",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT mean(usage_user) as \"user\", mean(usage_system) as \"system\", mean(usage_softirq) as \"softirq\", mean(usage_steal) as \"steal\", mean(usage_nice) as \"nice\", mean(usage_irq) as \"irq\", mean(usage_iowait) as \"iowait\", mean(usage_guest) as \"guest\", mean(usage_guest_nice) as \"guest_nice\"  FROM \"cpu\" WHERE \"host\" =~ /$server$/ and cpu = 'cpu-total' AND $timeFilter GROUP BY time($interval), *",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "CPU usage",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "percent",
              "label": "CPU Usage %",
              "logBase": 1,
              "max": 100,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 6
        },
          "height": "400",
          "hiddenSeries": false,
          "id": 12054,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "/total/",
              "color": "#BF1B00",
              "fill": 0,
              "linewidth": 2
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          }
          ],
              "measurement": "mem_inactive",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT mean(total) as total, mean(used) as used, mean(cached) as cached, mean(free) as free, mean(buffered) as buffered  FROM \"mem\" WHERE host =~ /$server$/ AND $timeFilter GROUP BY time($interval), host ORDER BY asc",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Memory usage",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 14
        },
          "height": "350",
          "hiddenSeries": false,
          "id": 61852,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "hideEmpty": true,
            "hideZero": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $col",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "processes",
              "policy": "default",
              "query": "SELECT mean(running) as running, mean(blocked) as blocked, mean(sleeping) as sleeping, mean(stopped) as stopped, mean(zombies) as zombies, mean(paging) as paging, mean(unknown) as unknown FROM \"processes\" WHERE host =~ /$server$/ AND $timeFilter GROUP BY time($interval), host ORDER BY asc",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "blocked"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Processes",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 0,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 14
        },
          "height": "350",
          "hiddenSeries": false,
          "id": 54694,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          }
          ],
              "measurement": "system_load1",
              "policy": "default",
              "query": "SELECT mean(load1) as short,mean(load5) as medium,mean(load15) as long FROM \"system\" WHERE host =~ /$server$/ AND $timeFilter GROUP BY time($interval), * ORDER BY asc",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Load averages",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "short",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 10,
            "w": 12,
            "x": 0,
            "y": 23
        },
          "height": "",
          "hiddenSeries": false,
          "id": 61855,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $col",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "processes",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(context_switches),1s)as \"context switches\"  FROM \"kernel\" WHERE host =~ /$server$/ AND $timeFilter GROUP BY time($interval), host ORDER BY asc",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "blocked"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Context switches",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "ops",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 10,
            "w": 12,
            "x": 12,
            "y": 23
        },
          "height": "",
          "hiddenSeries": false,
          "id": 61960,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $col",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$interval"
                ],
              "type": "time"
              },
              {
                "params": [
                  "null"
                ],
          "type": "fill"
          }
          ],
              "measurement": "kernel",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(processes_forked),1s) as forks FROM \"kernel\" WHERE \"host\" =~ /^$server$/ AND $timeFilter GROUP BY time($interval), host fill(null)",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "processes_forked"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": [
                {
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$server$/"
              }
          ]
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Forks",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "ops",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 33
        },
          "id": 61990,
          "panels": [],
          "repeat": "netif",
          "scopedVars": {
            "netif": {
              "selected": false,
              "text": "eth0",
              "value": "eth0"
          }
        },
          "title": "Network interface stats for $netif",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 34
        },
          "hiddenSeries": false,
          "id": 42026,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 2,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "netif": {
              "selected": false,
              "text": "eth0",
              "value": "eth0"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/ out$/",
              "transform": "negative-Y"
          },
          {
            "alias": "/ in$/",
            "color": "#7EB26D"
          },
          {
            "alias": "/ out$/",
            "color": "#BF1B00"
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $tag_interface: $col",
              "dsType": "influxdb",
              "function": "derivative",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "interface",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "net_bytes_recv",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(bytes_recv),1s)*8 as \"in\" FROM \"net\" WHERE host =~ /$server/ AND interface =~ /$netif/ AND $timeFilter GROUP BY time($interval), * fill(none)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: $tag_interface: $col",
            "dsType": "influxdb",
            "function": "derivative",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "interface",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "net_bytes_recv",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(bytes_sent),1s)*8 as \"out\" FROM \"net\" WHERE host =~ /$server/ AND interface =~ /$netif/ AND $timeFilter GROUP BY time($interval), * fill(none)",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Network Usage",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bps",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 34
        },
          "hiddenSeries": false,
          "id": 28572,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "netif": {
              "selected": false,
              "text": "eth0",
              "value": "eth0"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/ in$/",
              "transform": "negative-Y"
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $tag_interface: $col",
              "dsType": "influxdb",
              "function": "derivative",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "interface",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "net_bytes_recv",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(packets_recv), 1s) as \"in\" FROM \"net\" WHERE host =~ /$server/ AND interface =~ /$netif/ AND $timeFilter GROUP BY time($interval), * fill(none)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: $tag_interface: $col",
            "dsType": "influxdb",
            "function": "derivative",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "interface",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "net_bytes_recv",
              "orderByTime": "ASC",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(packets_sent), 1s) as \"out\" FROM \"net\" WHERE host =~ /$server/ AND interface =~ /$netif/ AND $timeFilter GROUP BY time($interval), * fill(none)",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Network Packets",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "pps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "decimals": 1,
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 41
        },
          "hiddenSeries": false,
          "id": 58901,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "netif": {
              "selected": false,
              "text": "eth0",
              "value": "eth0"
          }
        },
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $tag_interface: $col",
              "dsType": "influxdb",
              "function": "derivative",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "interface",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "net_bytes_recv",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(drop_in), 1s) as \"in\" FROM \"net\" WHERE host =~ /$server/ AND interface =~ /$netif/ AND $timeFilter GROUP BY time($interval), host,interface fill(none)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: $tag_interface: $col",
            "dsType": "influxdb",
            "function": "derivative",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "interface",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "net_bytes_recv",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(drop_out), 1s) as \"out\" FROM \"net\" WHERE host =~ /$server/ AND interface =~ /$netif/ AND $timeFilter GROUP BY time($interval), host,interface fill(none)",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Network drops",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "pps",
              "label": "Drops per second",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 41
        },
          "hiddenSeries": false,
          "id": 50643,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 2,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "netif": {
              "selected": false,
              "text": "eth0",
              "value": "eth0"
          }
        },
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $tag_interface: $col",
              "dsType": "influxdb",
              "function": "derivative",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "interface",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "net_bytes_recv",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(err_in), 1s) as \"in\" FROM \"net\" WHERE host =~ /$server/ AND interface =~ /$netif/ AND $timeFilter GROUP BY time($interval), host,interface fill(none)",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: $tag_interface: $col",
            "dsType": "influxdb",
            "function": "derivative",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "interface",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "net_bytes_recv",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(err_out), 1s) as \"out\" FROM \"net\" WHERE host =~ /$server/ AND interface =~ /$netif/ AND $timeFilter GROUP BY time($interval), host,interface fill(none)",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Network errors",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "short",
              "label": "Errors per second",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 48
        },
          "id": 61991,
          "panels": [],
          "repeat": null,
          "title": "Swap",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 49
        },
          "hiddenSeries": false,
          "id": 26024,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "/in/",
              "transform": "negative-Y"
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          }
          ],
              "measurement": "swap_in",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(\"in\")) as \"in\", non_negative_derivative(mean(\"out\")) as \"out\" FROM \"swap\" WHERE host =~ /$server$/ AND $timeFilter GROUP BY time($interval), host ORDER BY asc",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Swap I/O bytes",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 49
        },
          "hiddenSeries": false,
          "id": 61850,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "/total/",
              "color": "#890F02",
              "fill": 0
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          }
          ],
              "measurement": "swap_in",
              "policy": "default",
              "query": "SELECT mean(used) as \"used\", mean(total) as \"total\" FROM \"swap\" WHERE host =~ /$server$/ AND $timeFilter GROUP BY time($interval), host ORDER BY asc",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
          ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Swap usage (bytes)",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 56
        },
          "id": 61992,
          "panels": [],
          "repeat": "disk",
          "title": "Disk IOPS for /dev/$disk",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 0,
            "y": 57
        },
          "hiddenSeries": false,
          "id": 13782,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "hideEmpty": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 3,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "seriesOverrides": [
            {
              "alias": "/.*write$/",
              "transform": "negative-Y"
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $tag_name: $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "io_reads",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(reads),1s) as \"read\" FROM \"diskio\" WHERE \"host\" =~ /$server$/ AND \"name\" =~ /$disk$/ AND $timeFilter GROUP BY time($interval), *",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: $tag_name: $col",
            "dsType": "influxdb",
            "function": "mean",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "path",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "io_reads",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(writes),1s) as \"write\" FROM \"diskio\" WHERE \"host\" =~ /$server$/ AND \"name\" =~ /$disk$/  AND $timeFilter GROUP BY time($interval), *",
              "rawQuery": true,
              "refId": "C",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk I/O requests for /dev/$disk",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "iops",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 8,
            "y": 57
        },
          "hiddenSeries": false,
          "id": 60200,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "hideEmpty": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 3,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "seriesOverrides": [
            {
              "alias": "/.*write$/",
              "transform": "negative-Y"
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $tag_name: $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "io_reads",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(read_bytes),1s) as \"read\" FROM \"diskio\" WHERE \"host\" =~ /$server$/ AND \"name\" =~ /$disk$/  AND $timeFilter GROUP BY time($interval), *",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: $tag_name: $col",
            "dsType": "influxdb",
            "function": "mean",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "path",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "io_reads",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(write_bytes),1s) as \"write\" FROM \"diskio\" WHERE \"host\" =~ /$server$/ AND \"name\" =~ /$disk$/ AND $timeFilter GROUP BY time($interval), *",
              "rawQuery": true,
              "refId": "C",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk I/O bytes for /dev/$disk",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 16,
            "y": 57
        },
          "hiddenSeries": false,
          "id": 56720,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "hideEmpty": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 3,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "seriesOverrides": [
            {
              "alias": "/.*write$/",
              "transform": "negative-Y"
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_host: $tag_name: $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "io_reads",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(read_time),1s) as \"read\" FROM \"diskio\" WHERE \"host\" =~ /$server$/ AND \"name\" =~ /$disk$/  AND $timeFilter GROUP BY time($interval), *",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: $tag_name: $col",
            "dsType": "influxdb",
            "function": "mean",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "path",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "io_reads",
              "policy": "default",
              "query": "SELECT non_negative_derivative(mean(write_time),1s) as \"write\" FROM \"diskio\" WHERE \"host\" =~ /$server$/ AND \"name\" =~ /$disk$/ AND $timeFilter GROUP BY time($interval), *",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk I/O time for /dev/$disk",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "ms",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 64
        },
          "id": 61993,
          "panels": [],
          "repeat": "mountpoint",
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/dev/termination-log",
              "value": "/dev/termination-log"
          }
        },
          "title": "Disk space usage for $mountpoint",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 65
        },
          "hiddenSeries": false,
          "id": 52240,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/dev/termination-log",
              "value": "/dev/termination-log"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/total/",
              "color": "#BF1B00",
              "fill": 0,
              "linewidth": 2,
              "zindex": 3
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_total",
              "policy": "default",
              "query": "SELECT mean(total) AS \"total\", mean(used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/ AND \"path\" =~ /^$mountpoint$/AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk usage for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 65
        },
          "hiddenSeries": false,
          "id": 33458,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/dev/termination-log",
              "value": "/dev/termination-log"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/used/",
              "color": "#447EBC",
              "zindex": 3
          },
          {
            "alias": "/total/",
            "bars": false,
            "color": "#BF1B00",
            "fill": 0,
            "lines": true,
            "linewidth": 1
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: mountpoint $tag_path - $col",
            "dsType": "influxdb",
            "function": "mean",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "path",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_free) + mean(inodes_used) as \"total\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk inodes for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "short",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 72
        },
          "id": 61999,
          "panels": [],
          "repeatIteration": 1603435375490,
          "repeatPanelId": 61993,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/hostname",
              "value": "/etc/hostname"
          }
        },
          "title": "Disk space usage for $mountpoint",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 73
        },
          "hiddenSeries": false,
          "id": 62000,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "repeatIteration": 1603435375490,
          "repeatPanelId": 52240,
          "repeatedByRow": true,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/hostname",
              "value": "/etc/hostname"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/total/",
              "color": "#BF1B00",
              "fill": 0,
              "linewidth": 2,
              "zindex": 3
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_total",
              "policy": "default",
              "query": "SELECT mean(total) AS \"total\", mean(used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/ AND \"path\" =~ /^$mountpoint$/AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk usage for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 73
        },
          "hiddenSeries": false,
          "id": 62001,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "repeatIteration": 1603435375490,
          "repeatPanelId": 33458,
          "repeatedByRow": true,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/hostname",
              "value": "/etc/hostname"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/used/",
              "color": "#447EBC",
              "zindex": 3
          },
          {
            "alias": "/total/",
            "bars": false,
            "color": "#BF1B00",
            "fill": 0,
            "lines": true,
            "linewidth": 1
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: mountpoint $tag_path - $col",
            "dsType": "influxdb",
            "function": "mean",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "path",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_free) + mean(inodes_used) as \"total\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk inodes for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "short",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 80
        },
          "id": 62002,
          "panels": [],
          "repeatIteration": 1603435375490,
          "repeatPanelId": 61993,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/hosts",
              "value": "/etc/hosts"
          }
        },
          "title": "Disk space usage for $mountpoint",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 81
        },
          "hiddenSeries": false,
          "id": 62003,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "repeatIteration": 1603435375490,
          "repeatPanelId": 52240,
          "repeatedByRow": true,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/hosts",
              "value": "/etc/hosts"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/total/",
              "color": "#BF1B00",
              "fill": 0,
              "linewidth": 2,
              "zindex": 3
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_total",
              "policy": "default",
              "query": "SELECT mean(total) AS \"total\", mean(used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/ AND \"path\" =~ /^$mountpoint$/AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk usage for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 81
        },
          "hiddenSeries": false,
          "id": 62004,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "repeatIteration": 1603435375490,
          "repeatPanelId": 33458,
          "repeatedByRow": true,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/hosts",
              "value": "/etc/hosts"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/used/",
              "color": "#447EBC",
              "zindex": 3
          },
          {
            "alias": "/total/",
            "bars": false,
            "color": "#BF1B00",
            "fill": 0,
            "lines": true,
            "linewidth": 1
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: mountpoint $tag_path - $col",
            "dsType": "influxdb",
            "function": "mean",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "path",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_free) + mean(inodes_used) as \"total\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk inodes for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "short",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 88
        },
          "id": 62005,
          "panels": [],
          "repeatIteration": 1603435375490,
          "repeatPanelId": 61993,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/resolv.conf",
              "value": "/etc/resolv.conf"
          }
        },
          "title": "Disk space usage for $mountpoint",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 89
        },
          "hiddenSeries": false,
          "id": 62006,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "repeatIteration": 1603435375490,
          "repeatPanelId": 52240,
          "repeatedByRow": true,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/resolv.conf",
              "value": "/etc/resolv.conf"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/total/",
              "color": "#BF1B00",
              "fill": 0,
              "linewidth": 2,
              "zindex": 3
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_total",
              "policy": "default",
              "query": "SELECT mean(total) AS \"total\", mean(used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/ AND \"path\" =~ /^$mountpoint$/AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk usage for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 89
        },
          "hiddenSeries": false,
          "id": 62007,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "repeatIteration": 1603435375490,
          "repeatPanelId": 33458,
          "repeatedByRow": true,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/resolv.conf",
              "value": "/etc/resolv.conf"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/used/",
              "color": "#447EBC",
              "zindex": 3
          },
          {
            "alias": "/total/",
            "bars": false,
            "color": "#BF1B00",
            "fill": 0,
            "lines": true,
            "linewidth": 1
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: mountpoint $tag_path - $col",
            "dsType": "influxdb",
            "function": "mean",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "path",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_free) + mean(inodes_used) as \"total\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk inodes for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "short",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 96
        },
          "id": 62008,
          "panels": [],
          "repeatIteration": 1603435375490,
          "repeatPanelId": 61993,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/telegraf",
              "value": "/etc/telegraf"
          }
        },
          "title": "Disk space usage for $mountpoint",
          "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 97
        },
          "hiddenSeries": false,
          "id": 62009,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "repeatIteration": 1603435375490,
          "repeatPanelId": 52240,
          "repeatedByRow": true,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/telegraf",
              "value": "/etc/telegraf"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/total/",
              "color": "#BF1B00",
              "fill": 0,
              "linewidth": 2,
              "zindex": 3
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_total",
              "policy": "default",
              "query": "SELECT mean(total) AS \"total\", mean(used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/ AND \"path\" =~ /^$mountpoint$/AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk usage for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "bytes",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": true,
        "dashLength": 10,
        "dashes": false,
        "datasource": "InfluxDB",
        "editable": true,
        "error": false,
        "fieldConfig": {
          "defaults": {
            "custom": {}
          },
        "overrides": []
        },
          "fill": 1,
          "fillGradient": 0,
          "grid": {},
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 97
        },
          "hiddenSeries": false,
          "id": 62010,
          "interval": "$inter",
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
        },
          "lines": false,
          "linewidth": 1,
          "links": [],
          "maxPerRow": 2,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
        },
          "percentage": false,
          "pluginVersion": "7.2.1",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "repeatIteration": 1603435375490,
          "repeatPanelId": 33458,
          "repeatedByRow": true,
          "scopedVars": {
            "mountpoint": {
              "selected": false,
              "text": "/etc/telegraf",
              "value": "/etc/telegraf"
          }
        },
          "seriesOverrides": [
            {
              "alias": "/used/",
              "color": "#447EBC",
              "zindex": 3
          },
          {
            "alias": "/total/",
            "bars": false,
            "color": "#BF1B00",
            "fill": 0,
            "lines": true,
            "linewidth": 1
          }
        ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_host: mountpoint $tag_path - $col",
              "dsType": "influxdb",
              "function": "mean",
              "groupBy": [
                {
                  "interval": "auto",
                  "params": [
                    "auto"
                ],
              "type": "time"
              },
              {
                "key": "host",
                "params": [
                  "tag"
                ],
          "type": "tag"
          },
          {
            "key": "path",
            "params": [
              "tag"
              ],
            "type": "tag"
            }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_used) as \"used\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          },
          {
            "alias": "$tag_host: mountpoint $tag_path - $col",
            "dsType": "influxdb",
            "function": "mean",
            "groupBy": [
              {
                "interval": "auto",
                "params": [
                  "auto"
                ],
            "type": "time"
            },
            {
              "key": "host",
              "params": [
                "tag"
                ],
              "type": "tag"
              },
              {
                "key": "path",
                "params": [
                  "tag"
                ],
                  "type": "tag"
              }
            ],
              "measurement": "disk_inodes_free",
              "policy": "default",
              "query": "SELECT mean(inodes_free) + mean(inodes_used) as \"total\" FROM \"disk\" WHERE \"host\" =~ /$server$/  AND \"path\" =~ /^$mountpoint$/ AND $timeFilter GROUP BY time($interval), \"host\", \"path\"",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                  ],
              "type": "field"
              },
              {
                "params": [],
                "type": "mean"
                }
              ]
            ],
              "tags": []
          }
        ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Disk inodes for $mountpoint",
          "tooltip": {
            "msResolution": false,
            "shared": true,
            "sort": 0,
            "value_type": "cumulative"
        },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
          "yaxes": [
            {
              "format": "short",
              "logBase": 1,
              "max": null,
              "min": 0,
              "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
          "yaxis": {
            "align": false,
            "alignLevel": null
        }
      }
    ],
      "refresh": "1m",
      "schemaVersion": 26,
      "style": "dark",
      "tags": [
        "influxdb",
        "telegraf",
        "raspberrypi",
        "pi4"
    ],
      "templating": {
        "list": [
          {
            "allFormat": "glob",
            "current": {
              "selected": false,
              "text": "InfluxDB",
              "value": "InfluxDB"
          },
        "datasource": "InfluxDB telegraf",
        "hide": 0,
        "includeAll": false,
        "label": "",
        "multi": false,
        "name": "datasource",
        "options": [],
        "query": "influxdb",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "type": "datasource"
        },
        {
          "auto": true,
          "auto_count": 100,
          "auto_min": "30s",
          "current": {
            "selected": false,
            "text": "30s",
            "value": "30s"
          },
      "datasource": null,
      "hide": 0,
      "includeAll": false,
      "label": "Sampling",
      "multi": false,
      "name": "inter",
      "options": [
        {
          "selected": false,
          "text": "auto",
          "value": "$__auto_interval_inter"
          },
          {
            "selected": false,
            "text": "10s",
            "value": "10s"
            },
            {
              "selected": true,
              "text": "30s",
              "value": "30s"
            },
            {
              "selected": false,
              "text": "1m",
              "value": "1m"
            },
            {
              "selected": false,
              "text": "2m",
              "value": "2m"
            },
            {
              "selected": false,
              "text": "5m",
              "value": "5m"
            },
            {
              "selected": false,
              "text": "10m",
              "value": "10m"
            },
            {
              "selected": false,
              "text": "30m",
              "value": "30m"
            },
            {
              "selected": false,
              "text": "1h",
              "value": "1h"
            }
          ],
      "query": "10s,30s,1m,2m,5m,10m,30m,1h",
      "refresh": 2,
      "skipUrlSync": false,
      "type": "interval"
      },
      {
        "allValue": null,
        "current": {
          "selected": false,
          "text": "node3",
          "value": "node3"
          },
        "datasource": "InfluxDB",
        "definition": "",
        "hide": 0,
        "includeAll": false,
        "label": "Server",
        "multi": false,
        "name": "server",
        "options": [],
        "query": "SHOW TAG VALUES FROM system WITH KEY=host",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": null,
        "tags": [],
        "tagsQuery": null,
        "type": "query",
        "useTags": false
        },
        {
          "allValue": null,
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
          "value": [
            "$__all"
            ]
          },
            "datasource": "$datasource",
            "definition": "",
            "hide": 0,
            "includeAll": true,
            "label": "Mountpoint",
            "multi": true,
            "name": "mountpoint",
            "options": [],
            "query": "SHOW TAG VALUES FROM \"disk\" WITH KEY = \"path\" WHERE host =~ /$server/",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": null,
            "tags": [],
            "tagsQuery": null,
            "type": "query",
            "useTags": false
        },
        {
          "allValue": null,
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
          "value": [
            "$__all"
            ]
          },
            "datasource": "$datasource",
            "definition": "",
            "hide": 0,
            "includeAll": true,
            "label": "CPU",
            "multi": true,
            "name": "cpu",
            "options": [],
            "query": "SHOW TAG VALUES FROM \"cpu\" WITH KEY = \"cpu\" WHERE host =~ /$server/",
            "refresh": 1,
            "regex": "/cpu[0-9]/",
            "skipUrlSync": false,
            "sort": 1,
            "tagValuesQuery": null,
            "tags": [],
            "tagsQuery": null,
            "type": "query",
            "useTags": false
        },
        {
          "allValue": null,
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
          "value": [
            "$__all"
            ]
          },
            "datasource": "$datasource",
            "definition": "",
            "hide": 0,
            "includeAll": true,
            "label": "Disk",
            "multi": true,
            "name": "disk",
            "options": [],
            "query": "SHOW TAG VALUES FROM \"diskio\" WITH KEY = \"name\" WHERE host =~ /$server/",
            "refresh": 1,
            "regex": "/[a-z]d[\\D]$/",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": null,
            "tags": [],
            "tagsQuery": null,
            "type": "query",
            "useTags": false
        },
        {
          "allValue": null,
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
          "value": [
            "$__all"
            ]
          },
            "datasource": "$datasource",
            "definition": "",
            "hide": 0,
            "includeAll": true,
            "label": "Network interface",
            "multi": true,
            "name": "netif",
            "options": [],
            "query": "SHOW TAG VALUES FROM \"net\" WITH KEY = \"interface\" WHERE host =~ /$server/",
            "refresh": 1,
            "regex": "^(?!.*veth|all|tap).*$",
            "skipUrlSync": false,
            "sort": 1,
            "tagValuesQuery": null,
            "tags": [],
            "tagsQuery": null,
            "type": "query",
            "useTags": false
        }
      ]
    },
      "time": {
        "from": "now-30m",
        "to": "now"
    },
      "timepicker": {
        "refresh_intervals": [
          "5s",
          "10s",
          "30s",
          "1m",
          "5m",
          "15m",
          "30m",
          "1h",
          "2h",
          "1d"
      ],
        "time_options": [
          "5m",
          "15m",
          "1h",
          "6h",
          "12h",
          "24h",
          "2d",
          "7d",
          "30d"
      ]
    },
      "timezone": "browser",
      "title": "Raspberry Pi Monitoring",
      "uid": "sF7d-FHZz",
      "version": 1
    }
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  namespace: monitoring
  name: telegraf
spec:
  updateStrategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
  selector:
    matchLabels:
      app: telegraf
  template:
    metadata:
      labels:
        app: telegraf
        app.kubernetes.io/app: telegraf
        app.kubernetes.io/name: telegraf
        app.kubernetes.io/project: isp-checker
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 472
        fsGroup: 472
      containers:
        - name: telegraf
          image: tty0/isp_telegraf:1.15.3
          imagePullPolicy: IfNotPresent
          envFrom:
            - secretRef:
                name: isp-checker-secrets-rw
          env:
            - name: "KUBE_API"
              value: "https://node2:6443/"
            - name: HOSTNAME
              valueFrom:
                fieldRef:
                  fieldPath: spec.nodeName
            - name: "HOST_PROC"
              value: "/rootfs/proc"
            - name: "HOST_SYS"
              value: "/rootfs/sys"
          volumeMounts:
            - name: telegraf-config-volume
              mountPath: /etc/telegraf/
              readOnly: true
            - name: sys
              mountPath: /rootfs/sys/
              readOnly: true
            - name: proc
              mountPath: /rootfs/proc/
              readOnly: true
            - name: docker-socket
              mountPath: /var/run/docker.sock
            - name: utmp
              mountPath: /var/run/utmp
              readOnly: true
          resources:
            requests:
              memory: "100Mi"
              cpu: "0.1"
            limits:
              memory: "200Mi"
              cpu: "0.3"
      initContainers:
        - name: wait-for-influxdb
          image: curlimages/curl:7.72.0
          command: ['sh', '-c', "until curl -XGET http://influxdb-svc.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local:8086/; do echo Waiting\ for\ InfluxDB; sleep 2; done"]
      terminationGracePeriodSeconds: 30
      volumes:
        - name: telegraf-config-volume
          configMap:
            name: telegraf-config
            items:
              - key: telegraf.conf
                path: telegraf.conf
        - name: sys
          hostPath:
            path: /sys
        - name: docker-socket
          hostPath:
            path: /var/run/docker.sock
        - name: proc
          hostPath:
            path: /proc
        - name: utmp
          hostPath:
            path: /var/run/utmp
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: influxdb
    app.kubernetes.io/app: influxdb
    app.kubernetes.io/project: isp-checker
  name: influxdb-svc
  namespace: monitoring
spec:
  clusterIP: 10.43.37.100
  ports:
  - port: 8086
    protocol: TCP
    targetPort: 8086
  selector:
    app: influxdb
  sessionAffinity: None
  type: ClusterIP
---
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: monitoring
  name: influxdb
  labels:
    app: influxdb
spec:
  replicas: 1
  selector:
    matchLabels:
      app: influxdb
  template:
    metadata:
      labels:
        app: influxdb
        app.kubernetes.io/app: influxdb
        app.kubernetes.io/name: influxdb
        app.kubernetes.io/project: isp-checker
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 999
        fsGroup: 999
      containers:
        - name: influxdb
          image: influxdb:1.8.3
          imagePullPolicy: IfNotPresent
          envFrom:
            - secretRef:
                name: isp-checker-secrets-rw
          ports:
            - containerPort: 8086
          readinessProbe:
            httpGet:
              path: /ping
              port: 8086
            initialDelaySeconds: 30
            periodSeconds: 30
          livenessProbe:
            httpGet:
              path: /ping
              port: 8086
            initialDelaySeconds: 30
            periodSeconds: 30
          volumeMounts:
            - mountPath: /var/lib/influxdb
              name: var-lib-influxdb
          resources:
            requests:
              memory: "200Mi"
              cpu: "0.2"
            limits:
              memory: "300Mi"
              cpu: "0.5"
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      terminationGracePeriodSeconds: 30
      volumes:
        - name: var-lib-influxdb
          persistentVolumeClaim:
            claimName: influxdb-pvc

---
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: monitoring
  name: grafana
  labels:
    app: grafana
spec:
  replicas: 1
  progressDeadlineSeconds: 600
  selector:
    matchLabels:
      app: grafana
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: grafana
        app.kubernetes.io/app: influxdb
        app.kubernetes.io/name: influxdb
        app.kubernetes.io/project: isp-checker
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 472
        fsGroup: 472
      containers:
        - name: grafana
          image: grafana/grafana:7.2.1
          imagePullPolicy: IfNotPresent
          envFrom:
            - secretRef:
                name: isp-checker-secrets-ro
          volumeMounts:
            # Grafana persistent volume
            - name: grafana-volume
              mountPath: /var/lib/grafana
            # Grafana DS provisioner
            - name: influxdb-datasource-provisioner
              mountPath: /etc/grafana/provisioning/datasources/
            # Grafana Dashboards provisioner
            - name: grafana-dashboard-provisioner
              mountPath: /etc/grafana/provisioning/dashboards/
            # Network Dashboard
            - name: network-dashboard
              mountPath: /var/lib/grafana/dashboards/network-dashboard.json
              subPath: network-dashboard.json
            # Raspberry Dashboard
            - name: raspberry-dashboard
              mountPath: /var/lib/grafana/dashboards/raspberry-dashboard.json
              subPath: raspberry-dashboard.json
          ports:
            - containerPort: 3000
          env:
            - name: GF_DASHBOARDS_DEFAULT_HOME_DASHBOARD_PATH
              value: /var/lib/grafana/dashboards/network-dashboard.json
            - name: GF_INSTALL_PLUGINS
              value: https://grafana.com/api/plugins/gowee-traceroutemap-panel/versions/0.2.3/download;gowee-traceroutemap-panel
          readinessProbe:
            httpGet:
              path: /api/health
              port: 3000
            initialDelaySeconds: 5
            periodSeconds: 30
          livenessProbe:
            httpGet:
              path: /
              port: 3000
            initialDelaySeconds: 5
            periodSeconds: 30
          resources:
            requests:
              memory: "200Mi"
              cpu: "0.25"
            limits:
              memory: "500Mi"
              cpu: "0.4"
      volumes:
        # Grafana configuration PVC
        - name: grafana-volume
          persistentVolumeClaim:
            claimName: grafana-pvc
        # InfluxDB DS provisioner
        - name: influxdb-datasource-provisioner
          secret:
            secretName: influxdb-datasource-provisioner
        # Grafana dashboard provisioner
        - name: grafana-dashboard-provisioner
          configMap:
            name: grafana-dashboard-provisioner
        # Raspberry dashboard
        - name: raspberry-dashboard
          configMap:
            name: raspberry-dashboard
        # Network dashboard
        - name: network-dashboard
          configMap:
            name: network-dashboard
---
apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: telefraf-mtr
  namespace: monitoring
spec:
  schedule: "*/10 * * * *"
  startingDeadlineSeconds: 100
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 2
  concurrencyPolicy: "Forbid"
  jobTemplate:
    spec:
      template:
        metadata:
          labels:
            app.kubernetes.io/app: telegraf
            app.kubernetes.io/name: telegraf-mtr
            app.kubernetes.io/project: isp-checker
        spec:
          securityContext:
            runAsNonRoot: true
            runAsUser: 472
            fsGroup: 472
          containers:
            - name: telegraf-mtr
              image: tty0/isp_telegraf:1.15.3
              imagePullPolicy: IfNotPresent
              command: ['sh', '-c', "/usr/bin/telegraf --config /etc/telegraf/telegraf-mtr.conf --once"]
              envFrom:
                - secretRef:
                    name: isp-checker-secrets-rw
              env:
                - name: HOSTNAME
                  valueFrom:
                    fieldRef:
                      fieldPath: spec.nodeName
              resources:
                limits:
                  cpu: "0.30"
                  memory: "250Mi"
                requests:
                  cpu: "0.20"
                  memory: "130Mi"
              volumeMounts:
                - name: telegraf-config-volume
                  mountPath: /etc/telegraf/
                  readOnly: true
          restartPolicy: Never
          volumes:
            - name: telegraf-config-volume
              configMap:
                name: telegraf-config
                items:
                  - key: telegraf-mtr.conf
                    path: telegraf-mtr.conf

---
apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: telefraf-speedtest
  namespace: monitoring
spec:
  schedule: "*/10 * * * *"
  startingDeadlineSeconds: 100
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 2
  concurrencyPolicy: "Forbid"
  jobTemplate:
    spec:
      template:
        metadata:
          labels:
            app.kubernetes.io/app: telegraf
            app.kubernetes.io/name: telegraf-mtr
            app.kubernetes.io/project: isp-checker
        spec:
          securityContext:
            runAsNonRoot: true
            runAsUser: 10000
            fsGroup: 10000
          containers:
            - name: telegraf-speedtest
              image: tty0/isp_telegraf:1.15.3
              imagePullPolicy: IfNotPresent
              command: ['sh', '-c', "/usr/bin/telegraf --config /etc/telegraf/telegraf-speedtest.conf --once"]
              envFrom:
                - secretRef:
                    name: isp-checker-secrets-rw
              env:
                - name: HOSTNAME
                  valueFrom:
                    fieldRef:
                      fieldPath: spec.nodeName
              resources:
                limits:
                  cpu: "0.30"
                  memory: "250Mi"
                requests:
                  cpu: "0.15"
                  memory: "130Mi"
              volumeMounts:
                - name: telegraf-config-volume
                  mountPath: /etc/telegraf/
                  readOnly: true
          restartPolicy: Never
          volumes:
            - name: telegraf-config-volume
              configMap:
                name: telegraf-config
                items:
                  - key: telegraf-speedtest.conf
                    path: telegraf-speedtest.conf
